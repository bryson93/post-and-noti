<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Owner Notification</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
</head>
<body>
    <div class="cyberpunk-bg"></div>
    <div class="grid-lines"></div>
    
    <div class="theme-toggle">
        <i class="fas fa-moon" id="theme-icon"></i>
    </div>
    
    <div class="menu-icon" id="menu-icon">
        <i class="fas fa-bars"></i>
    </div>
    
    <div class="side-menu" id="side-menu">
        <div class="menu-header">
            <i class="fas fa-times" id="close-menu"></i>
            <h3>Owner Notification Menu</h3>
        </div>
        <ul>
            <li><a href="#" id="owner-settings"><i class="fas fa-cog"></i> Owner Post Settings</a></li>
            <li><a href="#" id="user-post-funnel"><i class="fas fa-share-alt"></i> User Post Funnel</a></li>
            <li><a href="#" id="contact-admin"><i class="fas fa-headset"></i> Contact Admin</a></li>
            <li><a href="#" id="clear-data"><i class="fas fa-trash"></i> Clear All Data</a></li>
        </ul>
    </div>
    
    <!-- Password Modal for Settings -->
    <div class="modal" id="settings-password-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2><i class="fas fa-lock"></i> Owner Access Required</h2>
            <div class="form-group">
                <input type="password" id="settings-password" placeholder="Enter owner password">
                <div id="settings-password-error" style="color: var(--error-color); margin-top: 10px; display: none;">Incorrect password. Try again.</div>
            </div>
            <button type="button" id="submit-settings-password" class="submit-btn"><i class="fas fa-key"></i> Submit</button>
        </div>
    </div>
    
    <!-- User Post Funnel Modal -->
    <div class="modal" id="user-post-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2><i class="fas fa-share-alt"></i> User Post Funnel</h2>
            <form class="user-post-form">
                <div class="form-group">
                    <label for="user-name">User Name:</label>
                    <input type="text" id="user-name" placeholder="Enter user name" required>
                </div>
                <div class="form-group">
                    <label for="user-profile">Profile Picture:</label>
                    <input type="file" id="user-profile" accept="image/*">
                </div>
                <div class="form-group">
                    <label for="user-post-content">Post Content:</label>
                    <textarea id="user-post-content" placeholder="Enter post content" required></textarea>
                </div>
                <button type="submit" class="submit-btn"><i class="fas fa-paper-plane"></i> Submit</button>
            </form>
        </div>
    </div>
    
    <div class="wrapper-container">
        <div class="container intro-container">
            <h1 class="glow">OWNER NOTIFICATION</h1>
            <h4>A centralized system for owners to manage and view all post activities.</h4>
            <div class="social-links">
                <a href="#" target="_blank"><i class="fab fa-facebook"></i></a>
                <a href="#" target="_blank"><i class="fas fa-envelope"></i></a>
                <a href="#" target="_blank"><i class="fab fa-github"></i></a>
                <a href="#" target="_blank"><i class="fab fa-instagram"></i></a>
                <a href="#" target="_blank"><i class="fab fa-youtube"></i></a>
            </div>
        </div>
        
        <!-- Pinned Notifications -->
        <div class="container pinned-container">
            <h1 class="glow"><i class="fas fa-thumbtack"></i> PINNED NOTIFICATIONS</h1>
            <div class="posts-list" id="pinned-posts">
                <!-- Pinned posts will appear here -->
            </div>
        </div>
        
        <!-- Regular Notifications Display -->
        <div class="container posts-container">
            <h1 class="glow">RECENT NOTIFICATIONS</h1>
            <div class="posts-list" id="regular-posts">
                <!-- Posts will be loaded from localStorage -->
            </div>
        </div>
        
        <footer>
            <div class="datetime" id="datetime"></div>
            <p>Â© Owner Notification | All Rights Reserved</p>
        </footer>
    </div>
    
    <!-- Contact Admin Modal -->
    <div class="modal" id="contact-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2><i class="fas fa-headset"></i> Contact Admin</h2>
            <form class="contact-form">
                <div class="form-group">
                    <label for="contact-name">Your Name:</label>
                    <input type="text" id="contact-name" placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label for="contact-email">Your Email:</label>
                    <input type="email" id="contact-email" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="contact-message">Message:</label>
                    <textarea id="contact-message" placeholder="How can we help?"></textarea>
                </div>
                <button type="submit" class="submit-btn"><i class="fas fa-paper-plane"></i> Send Message</button>
            </form>
        </div>
    </div>

    <!-- Owner Settings Modal -->
    <div class="modal" id="settings-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2><i class="fas fa-cog"></i> Owner Post Settings</h2>
            <form class="settings-form">
                <div class="form-group">
                    <label for="post-content">Notification Content:</label>
                    <textarea id="post-content" placeholder="Enter your notification content" required></textarea>
                </div>
                <div class="form-group">
                    <label for="post-visibility">Visibility:</label>
                    <select id="post-visibility">
                        <option value="public">Public</option>
                        <option value="private">Private</option>
                        <option value="followers">Followers Only</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="pin-post"> Pin this notification
                    </label>
                </div>
                <button type="submit" class="submit-btn"><i class="fas fa-paper-plane"></i> Publish Notification</button>
            </form>
        </div>
    </div>

<style>
    :root {
        --primary-color: #00f0ff;
        --secondary-color: #ff00f0;
        --accent-color: #f0ff00;
        --text-color: #e0e0e0;
        --bg-color: #0a0a12;
        --card-bg: rgba(20, 20, 40, 0.8);
        --border-color: rgba(0, 240, 255, 0.3);
        --success-color: #00ff88;
        --error-color: #ff0055;
        --warning-color: #ffaa00;
        --info-color: #00aaff;
        --neon-glow: 0 0 10px var(--primary-color), 
                    0 0 20px var(--primary-color), 
                    0 0 30px var(--primary-color);
    }

    [data-theme="light"] {
        --primary-color: #0066ff;
        --secondary-color: #ff0066;
        --accent-color: #66ff00;
        --text-color: #333;
        --bg-color: #f0f5ff;
        --card-bg: rgba(255, 255, 255, 0.9);
        --border-color: rgba(0, 102, 255, 0.3);
        --success-color: #00cc66;
        --error-color: #ff3333;
        --warning-color: #ff9900;
        --info-color: #3399ff;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        transition: background-color 0.3s, color 0.3s, border-color 0.3s;
    }

    body {
        font-family: 'Roboto', sans-serif;
        background-color: var(--bg-color);
        color: var(--text-color);
        min-height: 100vh;
        padding: 20px;
        position: relative;
        overflow-x: hidden;
    }

    .cyberpunk-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #0a0a12 0%, #1a1a3a 50%, #0a0a12 100%);
        z-index: -2;
        opacity: 0.9;
    }

    .grid-lines {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: 
            linear-gradient(rgba(0, 240, 255, 0.1) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 240, 255, 0.1) 1px, transparent 1px);
        background-size: 50px 50px;
        z-index: -1;
        animation: gridMove 100s linear infinite;
    }

    @keyframes gridMove {
        0% { background-position: 0 0; }
        100% { background-position: 1000px 1000px; }
    }

    .wrapper-container {
        max-width: 1000px;
        margin: 0 auto;
        position: relative;
    }

    .container {
        background-color: var(--card-bg);
        border-radius: 10px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        padding: 25px;
        margin: 20px auto;
        overflow: auto;
        border: 1px solid var(--border-color);
        backdrop-filter: blur(8px);
        position: relative;
        overflow: hidden;
    }

    .container::before {
        content: '';
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        background: linear-gradient(45deg, 
            var(--primary-color), 
            var(--secondary-color), 
            var(--accent-color));
        z-index: -1;
        border-radius: 12px;
        opacity: 0.3;
    }

    .intro-container {
        text-align: center;
        position: relative;
    }

    h1, h2, h3 {
        font-family: 'Orbitron', sans-serif;
        letter-spacing: 1px;
    }

    h1 {
        color: var(--primary-color);
        font-size: 2.5rem;
        margin-bottom: 15px;
        text-align: center;
        padding: 10px;
        border-radius: 8px;
        text-transform: uppercase;
    }

    h1.glow {
        animation: glow 2s ease-in-out infinite alternate;
    }

    @keyframes glow {
        from {
            text-shadow: 0 0 5px var(--primary-color), 0 0 10px var(--primary-color);
        }
        to {
            text-shadow: 0 0 10px var(--primary-color), 
                         0 0 20px var(--primary-color), 
                         0 0 30px var(--secondary-color);
        }
    }

    h4 {
        color: var(--text-color);
        font-weight: 400;
        margin-bottom: 20px;
        line-height: 1.6;
    }

    /* Notification Styles */
    .posts-list {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .post-item {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 8px;
        padding: 20px;
        border-left: 3px solid var(--primary-color);
        transition: all 0.3s;
        position: relative;
    }

    .post-item.pinned {
        border-left: 3px solid var(--accent-color);
    }

    .post-item.pinned::after {
        content: '\f08d';
        font-family: 'Font Awesome 5 Free';
        font-weight: 900;
        position: absolute;
        top: 10px;
        right: 10px;
        color: var(--accent-color);
        font-size: 16px;
    }

    .post-item:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 240, 255, 0.2);
    }

    .profile-header {
        margin-bottom: 15px;
    }

    .profile-info {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .profile-pic {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid var(--primary-color);
    }

    .profile-info div {
        display: flex;
        flex-direction: column;
    }

    .name-container {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .profile-info strong {
        color: var(--primary-color);
        font-weight: 500;
    }

    .admin-badge {
        display: flex;
        align-items: center;
        gap: 4px;
        background: rgba(0, 240, 255, 0.1);
        padding: 2px 6px;
        border-radius: 12px;
        font-size: 12px;
        color: var(--primary-color);
    }

    .user-badge {
        display: flex;
        align-items: center;
        gap: 4px;
        background: rgba(255, 0, 240, 0.1);
        padding: 2px 6px;
        border-radius: 12px;
        font-size: 12px;
        color: var(--secondary-color);
    }

    .admin-badge i, .user-badge i {
        font-size: 10px;
    }

    .post-time {
        font-size: 12px;
        color: var(--text-color);
        opacity: 0.8;
    }

    .post-content p {
        color: var(--text-color);
        opacity: 0.9;
        font-size: 14px;
        margin-bottom: 15px;
        line-height: 1.5;
    }

    /* Reaction Bar */
    .reaction-bar {
        display: flex;
        align-items: center;
        gap: 15px;
        padding-top: 10px;
        border-top: 1px solid var(--border-color);
    }

    .reaction-item {
        display: flex;
        align-items: center;
        gap: 5px;
        cursor: pointer;
    }

    .reaction-btn {
        color: var(--primary-color);
        font-size: 16px;
        transition: all 0.2s;
    }

    .reaction-btn:hover {
        transform: scale(1.2);
    }

    .reaction-btn.active {
        color: var(--error-color);
        animation: heartBeat 0.5s;
    }

    @keyframes heartBeat {
        0% { transform: scale(1); }
        25% { transform: scale(1.3); }
        50% { transform: scale(1); }
        75% { transform: scale(1.3); }
        100% { transform: scale(1); }
    }

    .reaction-count {
        font-size: 14px;
        color: var(--text-color);
    }

    .reaction-total {
        margin-left: auto;
        font-size: 14px;
        color: var(--text-color);
    }

    .reaction-total strong {
        color: var(--primary-color);
    }

    /* Form Styles */
    .form-wrapper {
        width: 100%;
        max-width: 600px;
        margin: 0 auto;
    }

    .form-container {
        display: flex;
        flex-direction: column;
    }

    .form-item {
        margin-bottom: 20px;
        position: relative;
    }

    .form-item label {
        font-size: 14px;
        color: var(--text-color);
        margin-bottom: 8px;
        display: block;
        font-weight: 500;
    }

    .form-item label i {
        margin-right: 8px;
        color: var(--primary-color);
    }

    input, textarea, select {
        background: rgba(10, 10, 20, 0.5);
        color: var(--text-color);
        border: 1px solid var(--border-color);
        width: 100%;
        margin-bottom: 0;
        padding: 12px 15px;
        border-radius: 8px;
        font-size: 16px;
        transition: all 0.3s;
        font-family: 'Roboto', sans-serif;
    }

    /* File input styling */
    input[type="file"] {
        padding: 8px 15px;
    }

    textarea {
        resize: vertical;
        min-height: 100px;
    }

    input:focus, textarea:focus, select:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: var(--neon-glow);
    }

    input::placeholder, textarea::placeholder {
        color: #888;
        font-style: italic;
    }

    .form-buttons {
        display: flex;
        gap: 15px;
        margin-top: 20px;
    }

    /* Theme Toggle */
    .theme-toggle {
        position: fixed;
        top: 20px;
        right: 20px;
        width: 40px;
        height: 40px;
        background: var(--card-bg);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 0 10px rgba(0, 240, 255, 0.3);
        z-index: 1000;
        border: 1px solid var(--border-color);
    }

    .theme-toggle:hover {
        box-shadow: 0 0 15px var(--primary-color);
    }

    .theme-toggle i {
        color: var(--primary-color);
        font-size: 18px;
    }

    /* Date Time */
    .datetime {
        background: var(--card-bg);
        padding: 8px 15px;
        border-radius: 20px;
        font-size: 14px;
        font-weight: 500;
        box-shadow: 0 0 10px rgba(0, 240, 255, 0.2);
        border: 1px solid var(--border-color);
        font-family: 'Orbitron', sans-serif;
        margin-bottom: 15px;
        display: inline-block;
    }

    /* Social Links */
    .social-links {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 20px;
    }

    .social-links a {
        color: var(--text-color);
        font-size: 20px;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s;
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid var(--border-color);
    }

    .social-links a:hover {
        transform: translateY(-3px);
        box-shadow: 0 0 15px currentColor;
    }

    .social-links a:nth-child(1):hover { color: #1877f2; background: rgba(24, 119, 242, 0.1); } /* Facebook */
    .social-links a:nth-child(2):hover { color: #ea4335; background: rgba(234, 67, 53, 0.1); } /* Email */
    .social-links a:nth-child(3):hover { color: #333; background: rgba(51, 51, 51, 0.1); } /* GitHub */
    .social-links a:nth-child(4):hover { color: #e4405f; background: rgba(228, 64, 95, 0.1); } /* Instagram */
    .social-links a:nth-child(5):hover { color: #ff0000; background: rgba(255, 0, 0, 0.1); } /* YouTube */

    /* Footer */
    footer {
        text-align: center;
        margin-top: 30px;
        padding: 15px;
        font-size: 14px;
        color: var(--text-color);
        opacity: 0.8;
        font-family: 'Orbitron', sans-serif;
        letter-spacing: 1px;
    }

    /* Menu */
    .menu-icon {
        position: fixed;
        top: 20px;
        right: 70px;
        width: 40px;
        height: 40px;
        background: var(--card-bg);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 0 10px rgba(0, 240, 255, 0.2);
        z-index: 1000;
        border: 1px solid var(--border-color);
    }

    .menu-icon:hover {
        box-shadow: 0 0 15px var(--primary-color);
    }

    .menu-icon i {
        color: var(--primary-color);
        font-size: 18px;
    }

    .side-menu {
        position: fixed;
        top: 0;
        right: -300px;
        width: 300px;
        height: 100vh;
        background: var(--card-bg);
        box-shadow: -5px 0 15px rgba(0, 0, 0, 0.3);
        z-index: 999;
        transition: right 0.3s ease;
        padding: 20px;
        overflow-y: auto;
        border-left: 1px solid var(--border-color);
        backdrop-filter: blur(8px);
    }

    .side-menu.active {
        right: 0;
    }

    .menu-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--border-color);
    }

    .menu-header h3 {
        color: var(--primary-color);
        font-family: 'Orbitron', sans-serif;
        margin-left: 10px;
    }

    .menu-header i {
        cursor: pointer;
        font-size: 20px;
        color: var(--text-color);
        order: -1;
    }

    .side-menu ul {
        list-style: none;
    }

    .side-menu li {
        margin-bottom: 15px;
    }

    .side-menu a {
        color: var(--text-color);
        text-decoration: none;
        display: flex;
        align-items: center;
        padding: 10px;
        border-radius: 5px;
        transition: all 0.3s;
        background: rgba(0, 0, 0, 0.2);
    }

    .side-menu a:hover {
        background: rgba(0, 240, 255, 0.1);
        color: var(--primary-color);
        box-shadow: 0 0 10px rgba(0, 240, 255, 0.2);
    }

    .side-menu a i {
        margin-right: 10px;
        width: 20px;
        text-align: center;
    }

    /* Modal */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 1001;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(5px);
    }

    .modal.active {
        display: flex;
    }

    .modal-content {
        background: var(--card-bg);
        border-radius: 10px;
        width: 90%;
        max-width: 500px;
        max-height: 80vh;
        overflow-y: auto;
        padding: 25px;
        position: relative;
        box-shadow: 0 0 30px rgba(0, 240, 255, 0.3);
        border: 1px solid var(--border-color);
        animation: modalAppear 0.3s ease-out;
    }

    @keyframes modalAppear {
        from { opacity: 0; transform: translateY(-20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .close-modal {
        position: absolute;
        top: 15px;
        right: 15px;
        font-size: 24px;
        cursor: pointer;
        color: var(--text-color);
        transition: all 0.3s;
    }

    .close-modal:hover {
        color: var(--primary-color);
        transform: rotate(90deg);
    }

    .contact-form .form-group,
    .user-post-form .form-group {
        margin-bottom: 15px;
    }

    .contact-form label,
    .user-post-form label {
        display: block;
        margin-bottom: 5px;
        color: var(--text-color);
    }

    .contact-form input,
    .contact-form textarea,
    .user-post-form input,
    .user-post-form textarea {
        width: 100%;
        padding: 10px;
        border-radius: 5px;
        border: 1px solid var(--border-color);
        background: rgba(0, 0, 0, 0.3);
        color: var(--text-color);
    }

    .contact-form textarea,
    .user-post-form textarea {
        min-height: 100px;
        resize: vertical;
    }

    .submit-btn {
        background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 500;
        transition: all 0.3s;
    }

    .submit-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 240, 255, 0.4);
    }

    .submit-btn i {
        margin-right: 8px;
    }

    /* Settings Form */
    .settings-form .form-group {
        margin-bottom: 15px;
    }

    .settings-form label {
        display: block;
        margin-bottom: 5px;
        color: var(--text-color);
    }

    /* Checkbox styles */
    .settings-form input[type="checkbox"] {
        width: auto;
        margin-right: 10px;
    }

    /* Responsive */
    @media (max-width: 768px) {
        h1 {
            font-size: 2rem;
        }
        
        .container {
            padding: 15px;
        }
        
        .theme-toggle, .menu-icon {
            position: fixed;
            top: 10px;
        }
        
        .theme-toggle {
            right: 10px;
        }
        
        .menu-icon {
            right: 60px;
        }
        
        .side-menu {
            width: 250px;
        }

        .post-item {
            padding: 15px;
        }

        .reaction-bar {
            gap: 10px;
        }

        .admin-badge, .user-badge {
            font-size: 10px;
            padding: 2px 4px;
        }
    }

    /* Cyberpunk scanline effect */
    body::after {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
            to bottom,
            rgba(0, 240, 255, 0.05) 0%,
            rgba(0, 240, 255, 0) 5%
        );
        background-size: 100% 5px;
        pointer-events: none;
        z-index: 9999;
        animation: scanline 8s linear infinite;
    }

    @keyframes scanline {
        0% { transform: translateY(-100%); }
        100% { transform: translateY(100%); }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize data structure in localStorage if it doesn't exist
        if (!localStorage.getItem('notificationData')) {
            const initialData = {
                posts: [],
                pinnedPosts: [],
                users: {}
            };
            localStorage.setItem('notificationData', JSON.stringify(initialData));
        }

        // Theme toggle with localStorage
        const themeToggle = document.querySelector('.theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        let currentTheme = localStorage.getItem('theme') || 'dark';
        
        document.documentElement.setAttribute('data-theme', currentTheme);
        
        if (currentTheme === 'light') {
            themeIcon.classList.remove('fa-moon');
            themeIcon.classList.add('fa-sun');
        }
        
        themeToggle.addEventListener('click', function() {
            if (currentTheme === 'dark') {
                currentTheme = 'light';
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            } else {
                currentTheme = 'dark';
                themeIcon.classList.remove('fa-sun');
                themeIcon.classList.add('fa-moon');
            }
            document.documentElement.setAttribute('data-theme', currentTheme);
            localStorage.setItem('theme', currentTheme);
        });
        
        // Date and time
        function updateDateTime() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: true
            };
            document.getElementById('datetime').textContent = now.toLocaleDateString('en-US', options);
        }
        
        updateDateTime();
        setInterval(updateDateTime, 1000);
        
        // Menu toggle
        const menuIcon = document.getElementById('menu-icon');
        const sideMenu = document.getElementById('side-menu');
        const closeMenu = document.getElementById('close-menu');
        
        menuIcon.addEventListener('click', function() {
            sideMenu.classList.add('active');
        });
        
        closeMenu.addEventListener('click', function() {
            sideMenu.classList.remove('active');
        });
        
        // Contact Admin Modal
        const contactBtn = document.getElementById('contact-admin');
        const contactModal = document.getElementById('contact-modal');
        const closeContactModal = contactModal.querySelector('.close-modal');
        
        contactBtn.addEventListener('click', function(e) {
            e.preventDefault();
            contactModal.classList.add('active');
            sideMenu.classList.remove('active');
        });
        
        closeContactModal.addEventListener('click', function() {
            contactModal.classList.remove('active');
        });
        
        // Owner Settings Password Protection
        const ownerSettingsBtn = document.getElementById('owner-settings');
        const settingsPasswordModal = document.getElementById('settings-password-modal');
        const submitSettingsPasswordBtn = document.getElementById('submit-settings-password');
        const settingsPasswordError = document.getElementById('settings-password-error');
        const settingsModal = document.getElementById('settings-modal');
        const closeSettingsPasswordModal = settingsPasswordModal.querySelector('.close-modal');
        
        ownerSettingsBtn.addEventListener('click', function(e) {
            e.preventDefault();
            settingsPasswordModal.classList.add('active');
            sideMenu.classList.remove('active');
            document.getElementById('settings-password').value = '';
            settingsPasswordError.style.display = 'none';
        });
        
        closeSettingsPasswordModal.addEventListener('click', function() {
            settingsPasswordModal.classList.remove('active');
        });
        
        submitSettingsPasswordBtn.addEventListener('click', function() {
            const password = document.getElementById('settings-password').value;
            if (password === 'owneraccess') { // Change this to your desired password
                settingsPasswordModal.classList.remove('active');
                settingsModal.classList.add('active');
            } else {
                settingsPasswordError.style.display = 'block';
            }
        });
        
        // Allow pressing Enter in password field
        document.getElementById('settings-password').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                submitSettingsPasswordBtn.click();
            }
        });
        
        // Close Settings Modal
        const closeSettingsModal = settingsModal.querySelector('.close-modal');
        closeSettingsModal.addEventListener('click', function() {
            settingsModal.classList.remove('active');
        });
        
        // User Post Funnel Modal
        const userPostBtn = document.getElementById('user-post-funnel');
        const userPostModal = document.getElementById('user-post-modal');
        const closeUserPostModal = userPostModal.querySelector('.close-modal');
        
        userPostBtn.addEventListener('click', function(e) {
            e.preventDefault();
            userPostModal.classList.add('active');
            sideMenu.classList.remove('active');
        });
        
        closeUserPostModal.addEventListener('click', function() {
            userPostModal.classList.remove('active');
        });
        
        // Clear All Data button
        const clearDataBtn = document.getElementById('clear-data');
        clearDataBtn.addEventListener('click', function(e) {
            e.preventDefault();
            if (confirm('Are you sure you want to clear all data? This cannot be undone.')) {
                localStorage.removeItem('notificationData');
                // Reinitialize empty data structure
                const initialData = {
                    posts: [],
                    pinnedPosts: [],
                    users: {}
                };
                localStorage.setItem('notificationData', JSON.stringify(initialData));
                // Reload the page to reflect changes
                location.reload();
            }
            sideMenu.classList.remove('active');
        });
        
        // Close modals when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target === contactModal) {
                contactModal.classList.remove('active');
            }
            if (e.target === settingsPasswordModal) {
                settingsPasswordModal.classList.remove('active');
            }
            if (e.target === settingsModal) {
                settingsModal.classList.remove('active');
            }
            if (e.target === userPostModal) {
                userPostModal.classList.remove('active');
            }
        });
        
        // Contact form submission
        const contactForm = document.querySelector('.contact-form');
        if (contactForm) {
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                alert('Message sent successfully! Our admin will contact you soon.');
                contactModal.classList.remove('active');
                contactForm.reset();
            });
        }
        
        // Format time difference (e.g., "Just now", "5 minutes ago")
        function formatTimeDifference(date) {
            const now = new Date();
            const diff = now - date;
            const seconds = Math.floor(diff / 1000);
            
            if (seconds < 60) {
                return 'Just now';
            }
            
            const minutes = Math.floor(seconds / 60);
            if (minutes < 60) {
                return `${minutes} minute${minutes === 1 ? '' : 's'} ago`;
            }
            
            const hours = Math.floor(minutes / 60);
            if (hours < 24) {
                return `${hours} hour${hours === 1 ? '' : 's'} ago`;
            }
            
            const days = Math.floor(hours / 24);
            if (days < 7) {
                return `${days} day${days === 1 ? '' : 's'} ago`;
            }
            
            // If older than a week, show actual date
            return date.toLocaleDateString('en-US', { 
                month: 'short', 
                day: 'numeric',
                year: 'numeric'
            });
        }
        
        // Reaction button functionality
        function handleReactionClick(e) {
            const reactionBtn = e.target.closest('.reaction-btn');
            if (!reactionBtn) return;
            
            const reactionItem = reactionBtn.closest('.reaction-item');
            const countElement = reactionItem.querySelector('.reaction-count');
            const totalElement = reactionBtn.closest('.reaction-bar').querySelector('.reaction-total strong');
            
            let count = parseInt(countElement.textContent);
            let total = parseInt(totalElement.textContent);
            
            // If button is already active (clicked again to remove reaction)
            if (reactionBtn.classList.contains('active')) {
                reactionBtn.classList.remove('active');
                count--;
                total--;
            } else {
                // Remove active class from all reaction buttons in this bar
                const allReactionBtns = reactionBtn.closest('.reaction-bar').querySelectorAll('.reaction-btn');
                allReactionBtns.forEach(btn => btn.classList.remove('active'));
                
                // Add active class to clicked button
                reactionBtn.classList.add('active');
                
                // Update counts
                const previousCount = parseInt(countElement.textContent);
                count = previousCount + 1;
                
                // Calculate total (add 1 for new reaction, subtract 1 if another reaction was previously active)
                const previouslyActive = reactionBtn.closest('.reaction-bar').querySelector('.reaction-btn.active:not(.just-activated)');
                if (previouslyActive) {
                    const prevCountElement = previouslyActive.closest('.reaction-item').querySelector('.reaction-count');
                    const prevCount = parseInt(prevCountElement.textContent);
                    prevCountElement.textContent = prevCount - 1;
                }
                
                total = total + 1 - (previouslyActive ? 1 : 0);
            }
            
            countElement.textContent = count;
            totalElement.textContent = total;
            
            // Update the post in localStorage
            updatePostInStorage(reactionBtn.closest('.post-item'));
        }
        
        // Add reaction listeners to all existing reaction buttons
        function addReactionListeners(container = document) {
            container.querySelectorAll('.reaction-btn').forEach(btn => {
                btn.addEventListener('click', handleReactionClick);
            });
        }
        
        // Initialize reaction buttons
        addReactionListeners();
        
        // Create a new post element from data
        function createPostElement(postData) {
            const postElement = document.createElement('div');
            postElement.className = 'post-item' + (postData.isPinned ? ' pinned' : '');
            
            // Format the time
            const postDate = new Date(postData.timestamp);
            const timeString = formatTimeDifference(postDate);
            
            // Determine if this is an owner post or user post
            const isOwnerPost = postData.isOwner || false;
            
            postElement.innerHTML = `
                <div class="profile-header">
                    <div class="profile-info">
                        <img src="${postData.profilePic || (isOwnerPost ? 'https://i.imgur.com/pazxtlr.jpeg' : 'https://i.imgur.com/JRlz1Zm.png')}" alt="${postData.author}" class="profile-pic">
                        <div>
                            <div class="name-container">
                                <strong>${postData.author}</strong>
                                <span class="${isOwnerPost ? 'admin' : 'user'}-badge">
                                    <i class="fas ${isOwnerPost ? 'fa-user-shield' : 'fa-user'}"></i>
                                    <span>${isOwnerPost ? 'Owner' : 'User'}</span>
                                </span>
                            </div>
                            <span class="post-time">${timeString}</span>
                        </div>
                    </div>
                </div>
                <div class="post-content">
                    <p>${postData.content}</p>
                </div>
                <div class="reaction-bar">
                    <div class="reaction-item">
                        <i class="fas fa-heart reaction-btn ${postData.reactions?.heart?.active ? 'active' : ''}" data-type="like" data-count="${postData.reactions?.heart?.count || 0}"></i>
                        <span class="reaction-count">${postData.reactions?.heart?.count || 0}</span>
                    </div>
                    <div class="reaction-item">
                        <i class="fas fa-thumbs-up reaction-btn ${postData.reactions?.thumbsUp?.active ? 'active' : ''}" data-type="like" data-count="${postData.reactions?.thumbsUp?.count || 0}"></i>
                        <span class="reaction-count">${postData.reactions?.thumbsUp?.count || 0}</span>
                    </div>
                    <div class="reaction-item">
                        <i class="fas fa-thumbs-down reaction-btn ${postData.reactions?.thumbsDown?.active ? 'active' : ''}" data-type="unlike" data-count="${postData.reactions?.thumbsDown?.count || 0}"></i>
                        <span class="reaction-count">${postData.reactions?.thumbsDown?.count || 0}</span>
                    </div>
                    <div class="reaction-total">
                        <span>Total reactions: </span>
                        <strong>${(postData.reactions?.heart?.count || 0) + (postData.reactions?.thumbsUp?.count || 0) + (postData.reactions?.thumbsDown?.count || 0)}</strong>
                    </div>
                </div>
            `;
            
            return postElement;
        }
        
        // Load posts from localStorage
        function loadPosts() {
            const data = JSON.parse(localStorage.getItem('notificationData'));
            const pinnedPostsContainer = document.getElementById('pinned-posts');
            const regularPostsContainer = document.getElementById('regular-posts');
            
            // Clear existing posts
            pinnedPostsContainer.innerHTML = '';
            regularPostsContainer.innerHTML = '';
            
            // Load pinned posts
            if (data.pinnedPosts && data.pinnedPosts.length > 0) {
                data.pinnedPosts.forEach(post => {
                    const postElement = createPostElement(post);
                    pinnedPostsContainer.appendChild(postElement);
                });
            }
            
            // Load regular posts
            if (data.posts && data.posts.length > 0) {
                data.posts.forEach(post => {
                    const postElement = createPostElement(post);
                    regularPostsContainer.appendChild(postElement);
                });
            }
            
            // Add event listeners to all reaction buttons
            addReactionListeners();
        }
        
        // Save a new post to localStorage
        function savePostToStorage(content, isPinned = false, isOwner = true, author = 'Bryson', profilePic = 'https://i.imgur.com/pazxtlr.jpeg') {
            const data = JSON.parse(localStorage.getItem('notificationData'));
            
            const newPost = {
                id: Date.now().toString(),
                author: author,
                content: content,
                profilePic: profilePic,
                isPinned: isPinned,
                isOwner: isOwner,
                timestamp: new Date().toISOString(),
                reactions: {
                    heart: { count: 0, active: false },
                    thumbsUp: { count: 0, active: false },
                    thumbsDown: { count: 0, active: false }
                }
            };
            
            if (isPinned) {
                data.pinnedPosts.unshift(newPost);
            } else {
                data.posts.unshift(newPost);
            }
            
            // Store user data if this is a user post
            if (!isOwner && !data.users[author]) {
                data.users[author] = {
                    name: author,
                    profilePic: profilePic,
                    lastPostDate: new Date().toISOString()
                };
            }
            
            localStorage.setItem('notificationData', JSON.stringify(data));
            
            return newPost;
        }
        
        // Update a post in localStorage (e.g., when reactions change)
        function updatePostInStorage(postElement) {
            const data = JSON.parse(localStorage.getItem('notificationData'));
            const postId = postElement.dataset.postId;
            
            // Get reaction data from the post element
            const reactionBar = postElement.querySelector('.reaction-bar');
            const reactions = {
                heart: {
                    count: parseInt(reactionBar.querySelector('[data-type="like"].fa-heart').closest('.reaction-item').querySelector('.reaction-count').textContent),
                    active: reactionBar.querySelector('[data-type="like"].fa-heart').classList.contains('active')
                },
                thumbsUp: {
                    count: parseInt(reactionBar.querySelector('[data-type="like"].fa-thumbs-up').closest('.reaction-item').querySelector('.reaction-count').textContent),
                    active: reactionBar.querySelector('[data-type="like"].fa-thumbs-up').classList.contains('active')
                },
                thumbsDown: {
                    count: parseInt(reactionBar.querySelector('[data-type="unlike"].fa-thumbs-down').closest('.reaction-item').querySelector('.reaction-count').textContent),
                    active: reactionBar.querySelector('[data-type="unlike"].fa-thumbs-down').classList.contains('active')
                }
            };
            
            // Find the post in either pinnedPosts or posts array
            let postToUpdate = null;
            let postArray = null;
            
            // Check pinned posts first
            postToUpdate = data.pinnedPosts.find(post => post.id === postId);
            if (postToUpdate) {
                postArray = data.pinnedPosts;
            } else {
                // Check regular posts
                postToUpdate = data.posts.find(post => post.id === postId);
                if (postToUpdate) {
                    postArray = data.posts;
                }
            }
            
            if (postToUpdate && postArray) {
                // Update the reactions
                postToUpdate.reactions = reactions;
                
                // Save back to localStorage
                localStorage.setItem('notificationData', JSON.stringify(data));
            }
        }
        
        // Settings form submission
        const settingsForm = document.querySelector('.settings-form');
        if (settingsForm) {
            settingsForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const content = document.getElementById('post-content').value;
                const isPinned = document.getElementById('pin-post').checked;
                
                if (content) {
                    // Save to localStorage
                    const newPost = savePostToStorage(content, isPinned);
                    
                    // Create and display the new post
                    const postElement = createPostElement(newPost);
                    postElement.dataset.postId = newPost.id;
                    
                    const postsList = isPinned ? 
                        document.getElementById('pinned-posts') : 
                        document.getElementById('regular-posts');
                    
                    // Add new notification to the top
                    postsList.insertBefore(postElement, postsList.firstChild);
                    
                    // Add event listeners to the new reaction buttons
                    addReactionListeners(postElement);
                    
                    alert('Notification published successfully!');
                    settingsModal.classList.remove('active');
                    settingsForm.reset();
                } else {
                    alert('Please enter notification content');
                }
            });
        }
        
        // User Post form submission
        const userPostForm = document.querySelector('.user-post-form');
        if (userPostForm) {
            userPostForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const userName = document.getElementById('user-name').value;
                const userContent = document.getElementById('user-post-content').value;
                const profileFile = document.getElementById('user-profile').files[0];
                
                if (userName && userContent) {
                    // Handle profile picture upload
                    if (profileFile) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const profilePic = e.target.result;
                            // Save post with the uploaded image
                            const newPost = savePostToStorage(userContent, false, false, userName, profilePic);
                            displayNewPost(newPost);
                        };
                        reader.readAsDataURL(profileFile);
                    } else {
                        // Save post with default user image
                        const newPost = savePostToStorage(userContent, false, false, userName);
                        displayNewPost(newPost);
                    }
                    
                    function displayNewPost(post) {
                        // Create and display the new post
                        const postElement = createPostElement(post);
                        postElement.dataset.postId = post.id;
                        
                        const postsList = document.getElementById('regular-posts');
                        
                        // Add new notification to the top
                        postsList.insertBefore(postElement, postsList.firstChild);
                        
                        // Add event listeners to the new reaction buttons
                        addReactionListeners(postElement);
                        
                        alert('User post created successfully!');
                        userPostModal.classList.remove('active');
                        userPostForm.reset();
                    }
                } else {
                    alert('Please fill in all required fields');
                }
            });
        }
        
        // Load all posts when the page loads
        loadPosts();
        
        // Add some sample data if there are no posts
        const data = JSON.parse(localStorage.getItem('notificationData'));
        if (data.posts.length === 0 && data.pinnedPosts.length === 0) {
            // Add sample owner posts
            savePostToStorage('This is an example notification content that would appear in the system.', false, true);
            savePostToStorage('Another example notification showing how the system displays different activities.', false, true);
            
            // Add a sample pinned post
            savePostToStorage('This is an important pinned notification that stays at the top.', true, true);
            
            // Add a sample user post
            savePostToStorage('Hello! This is a sample user post in the notification system.', false, false, 'Alex');
            
            // Reload the posts
            loadPosts();
        }
    });
</script>
</body>
</html>
